<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Braje.sh</title>
  <style>
    /* Windows XP Bliss wallpaper background */
    body {
      margin: 0;
      background: url('/img/windows-xp-bliss-4k-lu-1920x1080.jpg') no-repeat center center fixed;
      background-size: cover;
      color: #000;
      font-family: 'MS Sans Serif', sans-serif;
      position: relative;
    }

    /* Desktop icons styling in a vertical column on the left */
    #desktopIcons {
      position: absolute;
      top: 10px;
      left: 10px;
      z-index: 2;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .desktop-icon {
      text-align: center;
      font-size: 12px;
      cursor: pointer;
    }
    .desktop-icon a {
      text-decoration: none;
      color: inherit;
    }
    .desktop-icon img {
      display: block;
      margin: 0 auto;
      width: 32px;
      height: 32px;
      image-rendering: pixelated;
      border: none;
      box-shadow: none;
    }
    /* Retro Windows 98 game window styling */
    #win98-window {
      position: fixed;
      top: 50%;
      left: 50%;
      width: 800px;
      height: 600px;
      transform: translate(-50%, -50%);
      border: 2px solid #fff;
      background: #C0C0C0;
      box-shadow: 3px 3px 0 #000;
      z-index: 5;
    }
    .win98-titlebar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 2px 5px;
      background: linear-gradient(to bottom, #000080, #0000cd);
      color: #fff;
      font-size: 14px;
      user-select: none;
    }
    .window-controls {
      display: flex;
      gap: 4px;
    }
    .control-btn {
      background: #C0C0C0;
      border: 2px outset #fff;
      width: 20px;
      height: 20px;
      font-size: 12px;
      line-height: 16px;
      padding: 0;
      cursor: pointer;
    }
    .control-btn:active {
      border: 2px inset #fff;
    }
    .win98-content {
      background: #fff;
      position: relative;
      width: 100%;
      height: calc(100% - 24px);
      overflow: hidden;
    }
    /* Canvas fills the game window content area */
    #gameCanvas {
      display: block;
      background: #222;
      width: 100%;
      height: 100%;
    }
    /* Instruction overlay displayed over game canvas */
    #instructions {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 18px;
      text-align: center;
      background: rgba(255, 255, 255, 0.8);
      padding: 10px;
      border: 2px solid #000;
      z-index: 8;
    }
    /* Retro error popup styling (for game over) */
    #errorPopup {
      position: absolute;
      width: 300px;
      background: #C0C0C0;
      border: 2px solid #fff;
      box-shadow: 3px 3px 0 #000;
      display: none;
      z-index: 10;
      box-sizing: border-box;
    }
    #errorPopup .win98-titlebar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 2px 5px;
      background: linear-gradient(to bottom, #000080, #0000cd);
      color: #fff;
      font-size: 14px;
      user-select: none;
    }
    #errorPopup .win98-content {
      background: #fff;
      padding: 10px;
      font-size: 12px;
      box-sizing: border-box;
      overflow: hidden;
    }
    #errorPopup button {
      margin-top: 10px;
      font-family: 'MS Sans Serif', sans-serif;
    }
    /* Game complete popup styling */
    #completePopup {
      position: absolute;
      width: 300px;
      background: #C0C0C0;
      border: 2px solid #fff;
      box-shadow: 3px 3px 0 #000;
      display: none;
      z-index: 10;
      box-sizing: border-box;
    }
    #completePopup .win98-titlebar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 2px 5px;
      background: linear-gradient(to bottom, #000080, #0000cd);
      color: #fff;
      font-size: 14px;
      user-select: none;
    }
    #completePopup .win98-content {
      background: #fff;
      padding: 10px;
      font-size: 12px;
      box-sizing: border-box;
      overflow: hidden;
    }
    #completePopup button {
      margin-top: 10px;
      font-family: 'MS Sans Serif', sans-serif;
    }
    /* Taskbar styling */
    #taskbar {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 40px;
      background: #C0C0C0;
      border-top: 2px solid #fff;
      display: flex;
      align-items: center;
      padding: 0 10px;
      z-index: 1000;
      box-sizing: border-box;
    }
    /* Left side of taskbar: Start button */
    #startButton {
      display: flex;
      align-items: center;
      background: #C0C0C0;
      border: 2px outset #fff;
      padding: 2px 8px;
      font-size: 14px;
      cursor: pointer;
    }
    /* Pressed (active) state for Start button */
    #startButton.active {
      border: 2px inset #fff;
    }
    #startButton img {
      width: 16px;
      height: 16px;
      margin-right: 5px;
    }
    /* Start Menu fixed size and styled like desktop icons */
    #startMenu {
      position: fixed;
      bottom: 40px;
      left: 10px;
      width: 207px;
      height: 304px;
      background: #C0C0C0;
      border: 2px solid #fff;
      box-shadow: 3px 3px 0 #000;
      display: none;
      z-index: 1001;
      font-family: 'MS Sans Serif', sans-serif;
      box-sizing: border-box;
    }
    #startMenu ul {
      list-style: none;
      margin: 0;
      padding: 5px;
    }
    #startMenu li {
      padding: 5px;
      display: flex;
      align-items: center;
      cursor: pointer;
    }
    #startMenu li a {
      text-decoration: none;
      color: inherit;
      display: flex;
      align-items: center;
      width: 100%;
    }
    #startMenu li:hover {
      background: #000080;
      color: #fff;
    }
    #startMenu li img {
      width: 32px;
      height: 32px;
      margin-right: 5px;
    }
    /* Right side of taskbar: container for clock */
    #taskbar-right {
      margin-left: auto;
      display: flex;
      align-items: center;
      gap: 10px;
      border-left: 2px solid #fff;
      padding-left: 10px;
      font-size: 14px;
      font-family: 'MS Sans Serif', sans-serif;
    }
    #clock {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    /* Activation text placed above the taskbar */
    #activationText {
      position: fixed;
      bottom: 40px;
      left: 0;
      width: 100%;
      text-align: center;
      font-size: 16px;
      opacity: 0.65;
      font-family: 'MS Sans Serif', sans-serif;
      z-index: 1002;
    }
    /* Admin Window styling */
    #adminWindow {
      position: fixed;
      top: 50%;
      left: 50%;
      width: 400px;
      height: 300px;
      transform: translate(-50%, -50%);
      border: 2px solid #fff;
      background: #C0C0C0;
      box-shadow: 3px 3px 0 #000;
      z-index: 6;
      display: none;
      font-family: 'MS Sans Serif', sans-serif;
      box-sizing: border-box;
    }
    /* Dialpad styles for admin window */
    #adminContent {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: calc(100% - 24px);
    }
    #pinDisplay {
      font-size: 24px;
      margin-bottom: 10px;
      text-align: center;
      min-height: 30px;
    }
    #dialpad {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      width: 100%;
      max-width: 300px;
    }
    .dial-btn {
      padding: 10px;
      font-size: 18px;
      cursor: pointer;
      background: #C0C0C0;
      border: 2px outset #fff;
    }
    .dial-btn:active {
      border: 2px inset #fff;
    }
  </style>
</head>
<body>
  <!-- Activation text placed above the taskbar -->
  <div id="activationText">
    Made with love by Brajesh Inspired from 98.js.org
  </div>

  <!-- Desktop icons (vertical column on the left) -->
  <div id="desktopIcons">
    <!-- GitHub Icon -->
    <div class="desktop-icon">
      <a href="https://github.com/ElJuanDeag" target="_blank">
        <img src="https://img.icons8.com/?size=32&id=nXgKLCSNhAWG&format=png&color=000000" alt="GitHub">
        <span>GitHub</span>
      </a>
    </div>
    <!-- LinkedIn Icon -->
    <div class="desktop-icon">
      <a href="https://www.linkedin.com/in/brajesh-kumar-6103401b4/" target="_blank">
        <img src="https://img.icons8.com/?size=32&id=8808&format=png&color=000000" alt="LinkedIn">
        <span>LinkedIn</span>
      </a>
    </div>
    <!-- Mail Icon -->
    <div class="desktop-icon">
      <a href="mailto:reach.brajesh.kumar@gmail.com" target="_blank">
        <img src="https://img.icons8.com/?size=32&id=sEACKi8zoWLu&format=png&color=000000" alt="Mail">
        <span>Mail</span>
      </a>
    </div>
    <!-- Araknoid Game Icon -->
    <div class="desktop-icon" id="gameDesktopIcon">
      <img src="https://img.icons8.com/?size=32&id=59655&format=png&color=000000" alt="Araknoid">
      <span>Araknoid</span>
    </div>
    <!-- Admin Icon -->
    <div class="desktop-icon" id="adminDesktopIcon">
      <img src="https://img.icons8.com/?size=32&id=4BQ253NEFFli&format=png&color=000000" alt="Admin">
      <span>Admin</span>
    </div>
  </div>

  <!-- Retro Windows 98 game window -->
  <div id="win98-window">
    <div class="win98-titlebar">
      <span>Araknoid</span>
      <div class="window-controls">
        <button class="control-btn" id="minimizeBtn">_</button>
        <button class="control-btn" id="maximizeBtn">‚ñ°</button>
        <button class="control-btn" id="closeBtn">X</button>
      </div>
    </div>
    <div class="win98-content">
      <canvas id="gameCanvas"></canvas>
      <!-- Instruction overlay before game starts -->
      <div id="instructions">
        Use Left and Right arrow keys (‚¨ÖÔ∏è‚û°Ô∏è) to play the game
      </div>
      <!-- Retro error popup inside the game window (for game over) -->
      <div id="errorPopup">
        <div class="win98-titlebar">
          <span>Error</span>
          <div class="window-controls">
            <button class="control-btn" id="minimizeErrorBtn">_</button>
            <button class="control-btn" id="maximizeErrorBtn">‚ñ°</button>
            <button class="control-btn" id="closeErrorBtn">X</button>
          </div>
        </div>
        <div class="win98-content">
          <p>Game Over!</p>
          <button id="errorOkButton">OK</button>
        </div>
      </div>
      <!-- Game complete popup -->
      <div id="completePopup">
        <div class="win98-titlebar">
          <span>Game complete!</span>
          <div class="window-controls">
            <button class="control-btn" id="closeCompleteBtn">X</button>
          </div>
        </div>
        <div class="win98-content">
          <p>Daym! you are free, you cheeky bugger!<br>now go on explore rest of the website too</p>
          <button id="completeOkButton">OK</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Admin Window -->
  <div id="adminWindow">
    <div class="win98-titlebar">
      <span>Admin</span>
      <div class="window-controls">
        <button class="control-btn" id="adminCloseBtn">X</button>
      </div>
    </div>
    <div class="win98-content" id="adminContent">
      <!-- Dialpad layout will be inserted here -->
    </div>
  </div>

  <!-- Taskbar -->
  <div id="taskbar">
    <!-- Left: Start Button using provided icon -->
    <button id="startButton">
      <img src="https://98.js.org/images/start.png" alt="Start">
      Start
    </button>
    <!-- Right: Current date and time -->
    <div id="taskbar-right">
      <span id="clock"></span>
    </div>
  </div>
  
  <!-- Start Menu (with same icons/text as desktop icons) -->
  <div id="startMenu">
    <ul>
      <li>
        <a href="https://github.com/ElJuanDeag" target="_blank">
          <img src="https://img.icons8.com/?size=32&id=nXgKLCSNhAWG&format=png&color=000000" alt="GitHub">
          GitHub
        </a>
      </li>
      <li>
        <a href="https://www.linkedin.com/in/brajesh-kumar-6103401b4/" target="_blank">
          <img src="https://img.icons8.com/?size=32&id=8808&format=png&color=000000" alt="LinkedIn">
          LinkedIn
        </a>
      </li>
      <li>
        <a href="mailto:reach.brajesh.kumar@gmail.com">
          <img src="https://img.icons8.com/?size=32&id=sEACKi8zoWLu&format=png&color=000000" alt="Mail">
          Mail
        </a>
      </li>
      <li id="startMenuAraknoid">
        <img src="https://img.icons8.com/?size=32&id=59655&format=png&color=000000" alt="Araknoid">
        Araknoid
      </li>
      <li id="startMenuAdmin">
        <img src="https://img.icons8.com/?size=32&id=4BQ253NEFFli&format=png&color=000000" alt="Admin">
        Admin
      </li>
    </ul>
  </div>
  
  <script>
    // --- Remove instructions overlay on first key press ---
    const instructionsDiv = document.getElementById("instructions");
    document.addEventListener("keydown", () => {
      if(instructionsDiv.style.display !== "none") {
        instructionsDiv.style.display = "none";
      }
    });
    
    // --- Window Controls for Main Game Window ---
    const win98Window = document.getElementById("win98-window");
    const gameContent = win98Window.querySelector(".win98-content");
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    const errorPopup = document.getElementById("errorPopup");
    const errorOkButton = document.getElementById("errorOkButton");
    
    const minimizeBtn = document.getElementById("minimizeBtn");
    const maximizeBtn = document.getElementById("maximizeBtn");
    const closeBtn = document.getElementById("closeBtn");
    
    minimizeBtn.addEventListener("click", () => {
      gameContent.style.display = gameContent.style.display === "none" ? "block" : "none";
    });
    maximizeBtn.addEventListener("click", () => {
      if(win98Window.classList.contains("maximized")){
        win98Window.style.width = "800px";
        win98Window.style.height = "600px";
        win98Window.classList.remove("maximized");
      } else {
        win98Window.style.width = window.innerWidth + "px";
        win98Window.style.height = window.innerHeight + "px";
        win98Window.classList.add("maximized");
      }
      resizeCanvas();
    });
    // When closing the game, hide the window and reset the game.
    closeBtn.addEventListener("click", () => {
      win98Window.style.display = "none";
      resetGame();
    });
    
    // --- Window Controls for Error Popup ---
    const minimizeErrorBtn = document.getElementById("minimizeErrorBtn");
    const maximizeErrorBtn = document.getElementById("maximizeErrorBtn");
    const closeErrorBtn = document.getElementById("closeErrorBtn");
    const errorContentElem = errorPopup.querySelector(".win98-content");
    
    minimizeErrorBtn.addEventListener("click", () => {
      errorContentElem.style.display = errorContentElem.style.display === "none" ? "block" : "none";
    });
    maximizeErrorBtn.addEventListener("click", () => {
      if(errorPopup.classList.contains("maximized")){
        errorPopup.style.width = "300px";
        errorPopup.classList.remove("maximized");
      } else {
        errorPopup.style.width = gameContent.clientWidth + "px";
        errorPopup.classList.add("maximized");
      }
    });
    closeErrorBtn.addEventListener("click", () => {
      errorPopup.style.display = "none";
    });
    
    // --- Taskbar Start Menu Toggle ---
    const startButton = document.getElementById("startButton");
    const startMenu = document.getElementById("startMenu");
    startButton.addEventListener("click", (e) => {
      e.stopPropagation();
      if(startMenu.style.display === "block") {
        startMenu.style.display = "none";
        startButton.classList.remove("active");
      } else {
        startMenu.style.display = "block";
        startButton.classList.add("active");
      }
    });
    document.addEventListener("click", () => {
      startMenu.style.display = "none";
      startButton.classList.remove("active");
    });
    
    // --- Start Menu item event listeners for Araknoid and Admin ---
    document.getElementById("startMenuAraknoid").addEventListener("click", () => {
      win98Window.style.display = "block";
      resetGame();
      startMenu.style.display = "none";
      startButton.classList.remove("active");
    });
    document.getElementById("startMenuAdmin").addEventListener("click", () => {
      adminWindow.style.display = "block";
      resetAdminWindow();
      startMenu.style.display = "none";
      startButton.classList.remove("active");
    });
    
    // --- Desktop Icon for Game: Reopen game window and reset the game ---
    const gameDesktopIcon = document.getElementById("gameDesktopIcon");
    gameDesktopIcon.addEventListener("click", () => {
      win98Window.style.display = "block";
      resetGame();
    });
    
    // --- Desktop Icon for Admin: Open admin window and reset it ---
    const adminDesktopIcon = document.getElementById("adminDesktopIcon");
    const adminWindow = document.getElementById("adminWindow");
    const adminCloseBtn = document.getElementById("adminCloseBtn");
    adminDesktopIcon.addEventListener("click", () => {
      adminWindow.style.display = "block";
      resetAdminWindow();
    });
    adminCloseBtn.addEventListener("click", () => {
      adminWindow.style.display = "none";
    });
    
    // Global variable to store the admin PIN entry
    let adminPin = "";
    
    function updatePinDisplay() {
      document.getElementById("pinDisplay").textContent = adminPin;
    }
    
    // Reset admin window and set up dialpad
    function resetAdminWindow() {
      const adminContent = document.getElementById("adminContent");
      adminContent.innerHTML = `
        <div id="pinDisplay"></div>
        <div id="dialpad">
          <button class="dial-btn">1</button>
          <button class="dial-btn">2</button>
          <button class="dial-btn">3</button>
          <button class="dial-btn">4</button>
          <button class="dial-btn">5</button>
          <button class="dial-btn">6</button>
          <button class="dial-btn">7</button>
          <button class="dial-btn">8</button>
          <button class="dial-btn">9</button>
          <button class="dial-btn">Clear</button>
          <button class="dial-btn">0</button>
          <button class="dial-btn">Submit</button>
        </div>
      `;
      adminPin = "";
      updatePinDisplay();
      document.querySelectorAll('.dial-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          let text = this.textContent;
          if (text === "Clear") {
            adminPin = "";
            updatePinDisplay();
          } else if (text === "Submit") {
            if (adminPin === "0806") {
              document.getElementById("adminContent").innerHTML = `<p style="text-align:center; font-size: 24px;">Brajesh üíñ Manya</p>`;
            } else {
              document.getElementById("adminContent").innerHTML = `<p style="text-align:center; font-size: 24px;">It is a static page, what are you expecting here HackerMan üòë</p>`;
            }
          } else {
            adminPin += text;
            updatePinDisplay();
          }
        });
      });
    }
    
    // --- Canvas Resize ---
    function resizeCanvas() {
      canvas.width = gameContent.clientWidth;
      canvas.height = gameContent.clientHeight;
    }
    resizeCanvas();
    window.addEventListener("resize", resizeCanvas);
    
    // --- Digital Clock Update (current date and time) ---
    function updateClock() {
      const now = new Date();
      const dateString = now.toLocaleDateString();
      const timeString = now.toLocaleTimeString();
      document.getElementById("clock").textContent = `${dateString} ${timeString}`;
    }
    setInterval(updateClock, 1000);
    updateClock();
    
    // --- Game Logic (50% smaller pixel blocks) ---
    const paddleSpeed = 8;
    let paddle = {
      x: canvas.width / 2 - 75,
      y: canvas.height - 30,
      width: 150,
      height: 15,
      dx: 0,
    };
    let ball = {
      x: canvas.width / 2,
      y: canvas.height / 2,
      radius: 10,
      dx: 4,
      dy: -4,
    };
    let blocks = [];
    const blockWidth = 15, blockHeight = 15;
    const letterSpacing = 5;
    
    const letters = {
      C: { width: 4, pattern: [[1,1,1,1], [1,0,0,0], [1,0,0,0], [1,0,0,0], [1,1,1,1]] },
      O: { width: 4, pattern: [[1,1,1,1], [1,0,0,1], [1,0,0,1], [1,0,0,1], [1,1,1,1]] },
      M: { width: 5, pattern: [[1,0,0,0,1], [1,1,0,1,1], [1,0,1,0,1], [1,0,0,0,1], [1,0,0,0,1]] },
      I: { width: 1, pattern: [[1], [1], [1], [1], [1]] },
      N: { width: 5, pattern: [[1,0,0,0,1], [1,1,0,0,1], [1,0,1,0,1], [1,0,0,1,1], [1,0,0,0,1]] },
      G: { width: 4, pattern: [[1,1,1,1], [1,0,0,0], [1,0,1,1], [1,0,0,1], [1,1,1,1]] },
      S: { width: 4, pattern: [[1,1,1,1], [1,0,0,0], [1,1,1,1], [0,0,0,1], [1,1,1,1]] }
    };
    
    function createBlocks() {
      const phrase = "COMING SOON";
      let totalWidth = 0;
      for (let i = 0; i < phrase.length; i++) {
        let letter = phrase[i];
        if (letter === " ") {
          totalWidth += blockWidth * 3 + letterSpacing;
        } else if (letters[letter]) {
          totalWidth += letters[letter].width * blockWidth + letterSpacing;
        }
      }
      let startX = (canvas.width - totalWidth) / 2;
      let startY = 50;
      for (let i = 0; i < phrase.length; i++) {
        let letter = phrase[i];
        if (letter === " ") {
          startX += blockWidth * 3;
          continue;
        }
        let letterData = letters[letter];
        if (letterData) {
          for (let row = 0; row < letterData.pattern.length; row++) {
            for (let col = 0; col < letterData.pattern[row].length; col++) {
              if (letterData.pattern[row][col]) {
                blocks.push({
                  x: startX + col * blockWidth,
                  y: startY + row * blockHeight,
                  width: blockWidth,
                  height: blockHeight,
                  active: true,
                });
              }
            }
          }
          startX += letterData.width * blockWidth + letterSpacing;
        }
      }
    }
    createBlocks();
    
    function drawPaddle() {
      ctx.fillStyle = "white";
      ctx.fillRect(paddle.x, paddle.y, paddle.width, paddle.height);
    }
    
    function drawBall() {
      ctx.fillStyle = "red";
      ctx.beginPath();
      ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
      ctx.fill();
    }
    
    // Draw blocks in white
    function drawBlocks() {
      blocks.forEach((block) => {
        if (block.active) {
          ctx.fillStyle = "#fff";
          ctx.fillRect(block.x, block.y, block.width, block.height);
        }
      });
    }
    
    function checkCollisions() {
      blocks.forEach((block) => {
        if (
          block.active &&
          ball.x > block.x &&
          ball.x < block.x + block.width &&
          ball.y - ball.radius < block.y + block.height &&
          ball.y + ball.radius > block.y
        ) {
          ball.dy *= -1;
          block.active = false;
        }
      });
      // Check if all blocks are destroyed:
      if (blocks.every(block => !block.active)) {
        showCompletePopup();
      }
    }
    
    function moveBall() {
      ball.x += ball.dx;
      ball.y += ball.dy;
      checkCollisions();
      if (ball.x - ball.radius < 0 || ball.x + ball.radius > canvas.width) {
        ball.dx *= -1;
      }
      if (ball.y - ball.radius < 0) {
        ball.dy *= -1;
      }
      if (
        ball.y + ball.radius > paddle.y &&
        ball.x > paddle.x &&
        ball.x < paddle.x + paddle.width
      ) {
        ball.dy *= -1;
      }
      if (ball.y + ball.radius > canvas.height) {
        showErrorPopup();
      }
    }
    
    document.addEventListener("keydown", (e) => {
      if (e.key === "ArrowLeft") {
        paddle.dx = -paddleSpeed;
      } else if (e.key === "ArrowRight") {
        paddle.dx = paddleSpeed;
      }
    });
    document.addEventListener("keyup", () => {
      paddle.dx = 0;
    });
    
    function showErrorPopup() {
      errorPopup.style.display = "block";
      errorPopup.style.top = (gameContent.clientHeight - errorPopup.offsetHeight) / 2 + "px";
      errorPopup.style.left = (gameContent.clientWidth - errorPopup.offsetWidth) / 2 + "px";
    }
    
    errorOkButton.addEventListener("click", () => {
      errorPopup.style.display = "none";
      resetGame();
    });
    
    // Show game complete popup
    function showCompletePopup() {
      const completePopup = document.getElementById("completePopup");
      completePopup.style.display = "block";
      completePopup.style.top = (gameContent.clientHeight - completePopup.offsetHeight) / 2 + "px";
      completePopup.style.left = (gameContent.clientWidth - completePopup.offsetWidth) / 2 + "px";
    }
    
    // Event listeners for complete popup buttons
    document.getElementById("closeCompleteBtn").addEventListener("click", () => {
      document.getElementById("completePopup").style.display = "none";
    });
    document.getElementById("completeOkButton").addEventListener("click", () => {
      document.getElementById("completePopup").style.display = "none";
    });
    
    // Reset game: reposition paddle/ball and reactivate all blocks
    function resetGame() {
      paddle.x = canvas.width / 2 - paddle.width / 2;
      paddle.y = canvas.height - 30;
      ball.x = canvas.width / 2;
      ball.y = canvas.height / 2;
      ball.dx = 4;
      ball.dy = -4;
      blocks.forEach(block => block.active = true);
      update();
    }
    
    function update() {
      // If game complete popup is showing, stop update loop.
      if(document.getElementById("completePopup").style.display === "block") return;
      if(errorPopup.style.display === "block") return;
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      moveBall();
      drawBlocks();
      drawPaddle();
      drawBall();
      paddle.x += paddle.dx;
      if (paddle.x < 0) paddle.x = 0;
      if (paddle.x + paddle.width > canvas.width)
        paddle.x = canvas.width - paddle.width;
      requestAnimationFrame(update);
    }
    update();
  </script>
</body>
</html>
